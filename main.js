(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function n(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,i(e,t,"get"))}function r(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,i(e,t,"set"),n),n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var o=new WeakMap,a=new WeakMap,l=function(){function i(e,n){var l=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,o,{writable:!0,value:void 0}),t(this,a,{writable:!0,value:void 0}),r(this,o,l),r(this,a,document.querySelector(n))}var l,u;return l=i,(u=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return n(t,o).call(t,e)}))}},{key:"addItem",value:function(e){n(this,a).prepend(e)}}])&&e(l.prototype,u),Object.defineProperty(l,"prototype",{writable:!1}),i}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function s(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,f(e,t,"get"))}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var p=new WeakMap,h=new WeakMap,d=new WeakMap,v=function(){function e(t){var n,r,i,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,p,{writable:!0,value:void 0}),c(this,h,{writable:!0,value:function(e){"Escape"===e.key&&o.closePopup()}}),c(this,d,{writable:!0,value:function(e){e.target.closest(".popup__container")||o.closePopup()}}),n=this,r=p,i=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,f(n,r,"set"),i)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){s(this,p).classList.add("popup_opened"),document.addEventListener("keydown",s(this,h))}},{key:"closePopup",value:function(){s(this,p).classList.remove("popup_opened"),document.removeEventListener("keydown",s(this,h))}},{key:"setEventListeners",value:function(){var e=this;s(this,p).querySelector(".popup__close").addEventListener("click",(function(){e.closePopup()})),s(this,p).addEventListener("mousedown",s(this,d))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=m(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},b.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function E(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function P(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,C(e,t,"get"))}function W(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,C(e,t,"set"),n),n}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var O=new WeakMap,j=new WeakMap,L=new WeakMap,M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(i){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(_(t=o.call(this,e)),O,{writable:!0,value:void 0}),E(_(t),j,{writable:!0,value:void 0}),E(_(t),L,{writable:!0,value:void 0}),W(_(t),O,document.querySelector(e)),W(_(t),j,P(_(t),O).querySelector(".popup__image")),W(_(t),L,P(_(t),O).querySelector(".popup__title-image")),t}return t=a,(n=[{key:"openPopup",value:function(e){P(this,j).src=e.link,P(this,j).alt=e.name,P(this,L).textContent=e.name,b(S(a.prototype),"openPopup",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(v);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=A(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},I.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function U(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function D(e,t,n){F(e,t),t.set(e,n)}function F(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function B(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,N(e,t,"get"))}function V(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,N(e,t,"set"),n),n}function N(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var J=new WeakMap,H=new WeakMap,$=new WeakMap,G=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakSet,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(r);if(i){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function a(e){var t,n,r,i=e.popupSelector,l=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),F(n=x(t=o.call(this,i)),r=Y),r.add(n),D(x(t),J,{writable:!0,value:void 0}),D(x(t),H,{writable:!0,value:void 0}),D(x(t),$,{writable:!0,value:void 0}),D(x(t),G,{writable:!0,value:void 0}),D(x(t),K,{writable:!0,value:void 0}),D(x(t),Q,{writable:!0,value:void 0}),D(x(t),X,{writable:!0,value:void 0}),V(x(t),J,document.querySelector(i)),V(x(t),G,B(x(t),J).querySelector(".popup__form")),V(x(t),Q,B(x(t),J).querySelector(".popup__button")),V(x(t),H,B(x(t),J).querySelectorAll(".popup__input")),V(x(t),K,l),V(x(t),X,B(x(t),Q).textContent),t}return t=a,(n=[{key:"getFormPopup",value:function(){return B(this,G)}},{key:"setInputValues",value:function(e){B(this,H).forEach((function(t){return t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;I(z(a.prototype),"setEventListeners",this).call(this),B(this,G).addEventListener("submit",(function(t){t.preventDefault(),B(e,K).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,Y,ee).call(e))}))}},{key:"closePopup",value:function(){B(this,G).reset(),I(z(a.prototype),"closePopup",this).call(this)}},{key:"renderLoading",value:function(e){B(this,Q).textContent=e?"Сохранение...":B(this,X)}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(v);function ee(){var e=this;return V(this,$,{}),B(this,H).forEach((function(t){return B(e,$)[t.name]=t.value})),B(this,$)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function re(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,oe(e,t,"get"))}function ie(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,oe(e,t,"set"),n),n}function oe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ae=new WeakMap,le=new WeakMap,ue=new WeakMap,ce=new WeakMap,se=function(){function e(t){var n=t.nameSelector,r=t.jobSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ne(this,ae,{writable:!0,value:void 0}),ne(this,le,{writable:!0,value:void 0}),ne(this,ue,{writable:!0,value:void 0}),ne(this,ce,{writable:!0,value:void 0}),ie(this,ae,document.querySelector(n)),ie(this,le,document.querySelector(r)),ie(this,ce,document.querySelector(i))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return ie(this,ue,{}),re(this,ue).name=re(this,ae).textContent,re(this,ue).about=re(this,le).textContent,re(this,ue)}},{key:"setUserInfo",value:function(e){re(this,ae).textContent=e.name,re(this,le).textContent=e.about,re(this,ce).src=e.avatar}},{key:"setUserId",value:function(e){return e._id}},{key:"getUserId",value:function(){return this._id}},{key:"setUserAvatar",value:function(e){re(this,ce).src=e.avatar}}])&&te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){de(e,t),t.add(e)}function he(e,t,n){de(e,t),t.set(e,n)}function de(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ve(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function ye(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,be(e,t,"get"))}function we(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,be(e,t,"set"),n),n}function be(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var me=new WeakMap,ke=new WeakMap,ge=new WeakMap,_e=new WeakMap,Se=new WeakMap,Ee=new WeakMap,Pe=new WeakMap,We=new WeakMap,Ce=new WeakMap,Oe=new WeakMap,je=new WeakMap,Le=new WeakMap,Me=new WeakMap,Te=new WeakMap,qe=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,Re=new WeakMap,Ue=new WeakSet,xe=new WeakSet,ze=new WeakSet,De=new WeakSet,Fe=function(){function e(t,n,r,i){var o=r.handleCardClick,a=r.handleAddLike,l=r.handleRemoveLike,u=r.handleTrashClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pe(this,De),pe(this,ze),pe(this,xe),pe(this,Ue),he(this,me,{writable:!0,value:void 0}),he(this,ke,{writable:!0,value:void 0}),he(this,ge,{writable:!0,value:void 0}),he(this,_e,{writable:!0,value:void 0}),he(this,Se,{writable:!0,value:void 0}),he(this,Ee,{writable:!0,value:void 0}),he(this,Pe,{writable:!0,value:void 0}),he(this,We,{writable:!0,value:void 0}),he(this,Ce,{writable:!0,value:void 0}),he(this,Oe,{writable:!0,value:void 0}),he(this,je,{writable:!0,value:void 0}),he(this,Le,{writable:!0,value:void 0}),he(this,Me,{writable:!0,value:void 0}),he(this,Te,{writable:!0,value:void 0}),he(this,qe,{writable:!0,value:void 0}),he(this,Ie,{writable:!0,value:void 0}),he(this,Ae,{writable:!0,value:void 0}),he(this,Re,{writable:!0,value:void 0}),we(this,me,t.link),we(this,ke,t.name),we(this,ge,t.likes),we(this,_e,t.owner),we(this,Ie,t),we(this,Ee,n),we(this,je,o),we(this,Le,a),we(this,Me,l),we(this,Te,u),we(this,Re,t.likes),we(this,Ae,i)}var t,n;return t=e,(n=[{key:"handleDeleteCard",value:function(){ye(this,Se).remove(),we(this,Se,null)}},{key:"setLikeInfo",value:function(e){we(this,Re,e),ye(this,qe).textContent=ye(this,Re).length,ve(this,xe,Ve).call(this,ye(this,Re))}},{key:"createCard",value:function(){return we(this,Se,ve(this,Ue,Be).call(this)),we(this,Oe,ye(this,Se).querySelector(".element__title")),we(this,We,ye(this,Se).querySelector(".element__img")),we(this,Pe,ye(this,Se).querySelector(".element__like-btn")),we(this,Ce,ye(this,Se).querySelector(".element__trash-btn")),we(this,qe,ye(this,Se).querySelector(".element__like-count")),ye(this,Oe).textContent=ye(this,ke),ye(this,We).src=ye(this,me),ye(this,We).alt=ye(this,ke),ye(this,qe).textContent=ye(this,ge).length,ve(this,xe,Ve).call(this,ye(this,ge)),ye(this,Ae)!==ye(this,_e)._id&&ye(this,Ce).remove(),ve(this,De,Je).call(this),ye(this,Se)}}])&&fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Be(){return document.querySelector(ye(this,Ee)).content.querySelector(".element").cloneNode(!0)}function Ve(e){var t=this;e.find((function(e){return e._id===ye(t,Ae)}))?ye(this,Pe).classList.add("element__like_active-btn"):ye(this,Pe).classList.remove("element__like_active-btn")}function Ne(){ye(this,Pe).classList.contains("element__like_active-btn")?ye(this,Me).call(this,this):ye(this,Le).call(this,this)}function Je(){ye(this,We).addEventListener("click",ye(this,je).bind(this)),ye(this,Pe).addEventListener("click",ve(this,ze,Ne).bind(this)),ye(this,Ce).addEventListener("click",ye(this,Te).bind(this))}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t,n){Ge(e,t),t.set(e,n)}function Ge(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ke(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Qe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ye(e,t,"get"))}function Xe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ye(e,t,"set"),n),n}function Ye(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ze=new WeakMap,et=new WeakMap,tt=new WeakSet,nt=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ge(this,n=tt),n.add(this),$e(this,Ze,{writable:!0,value:void 0}),$e(this,et,{writable:!0,value:void 0}),Xe(this,Ze,t.url),Xe(this,et,t.headers)}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return fetch("".concat(Qe(this,Ze),"/users/me"),{headers:Qe(this,et)}).then(Ke(this,tt,rt))}},{key:"getInitialCards",value:function(){return fetch("".concat(Qe(this,Ze),"/cards"),{headers:Qe(this,et)}).then(Ke(this,tt,rt))}},{key:"editUserInfo",value:function(e,t){return fetch("".concat(Qe(this,Ze),"/users/me"),{method:"PATCH",headers:Qe(this,et),body:JSON.stringify({name:e,about:t})}).then(Ke(this,tt,rt))}},{key:"editUserAvatar",value:function(e){return fetch("".concat(Qe(this,Ze),"/users/me/avatar"),{method:"PATCH",headers:Qe(this,et),body:JSON.stringify({avatar:e})}).then(Ke(this,tt,rt))}},{key:"createCard",value:function(e,t){return fetch("".concat(Qe(this,Ze),"/cards"),{method:"POST",headers:Qe(this,et),body:JSON.stringify({name:e,link:t})}).then(Ke(this,tt,rt))}},{key:"addLikeCard",value:function(e){return fetch("".concat(Qe(this,Ze),"/cards/").concat(e,"/likes"),{method:"PUT",headers:Qe(this,et)}).then(Ke(this,tt,rt))}},{key:"removeLikeCard",value:function(e){return fetch("".concat(Qe(this,Ze),"/cards/").concat(e,"/likes"),{method:"DELETE",headers:Qe(this,et)}).then(Ke(this,tt,rt))}},{key:"deleteCard",value:function(e){return fetch("".concat(Qe(this,Ze),"/cards/").concat(e),{method:"DELETE",headers:Qe(this,et)}).then(Ke(this,tt,rt))}}],n&&He(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rt(e){return e.ok?e.json():Promise.reject(new Error(e.status))}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){lt(e,t),t.add(e)}function at(e,t,n){lt(e,t),t.set(e,n)}function lt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ut(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function ct(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ft(e,t,"get"))}function st(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ft(e,t,"set"),n),n}function ft(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var pt=new WeakMap,ht=new WeakMap,dt=new WeakMap,vt=new WeakMap,yt=new WeakMap,wt=new WeakMap,bt=new WeakMap,mt=new WeakMap,kt=new WeakMap,gt=new WeakSet,_t=new WeakSet,St=new WeakSet,Et=new WeakSet,Pt=new WeakSet,Wt=new WeakSet,Ct=new WeakSet,Ot=new WeakSet,jt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ot(this,Ot),ot(this,Ct),ot(this,Wt),ot(this,Pt),ot(this,Et),ot(this,St),ot(this,_t),ot(this,gt),at(this,pt,{writable:!0,value:void 0}),at(this,ht,{writable:!0,value:void 0}),at(this,dt,{writable:!0,value:void 0}),at(this,vt,{writable:!0,value:void 0}),at(this,yt,{writable:!0,value:void 0}),at(this,wt,{writable:!0,value:void 0}),at(this,bt,{writable:!0,value:void 0}),at(this,mt,{writable:!0,value:void 0}),at(this,kt,{writable:!0,value:void 0}),st(this,pt,t.formSelector),st(this,ht,t.inputSelector),st(this,dt,t.submitButtonSelector),st(this,vt,t.inactiveButtonClass),st(this,yt,t.inputErrorClass),st(this,wt,t.errorClass),st(this,bt,n),st(this,mt,ct(this,bt).querySelector(ct(this,dt))),st(this,kt,Array.from(ct(this,bt).querySelectorAll(ct(this,ht))))}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){ut(this,Ct,Rt).call(this),ut(this,Ot,Ut).call(this)}},{key:"resetValidation",value:function(){var e=this;ct(this,kt).forEach((function(t){ut(e,_t,Mt).call(e,t)})),ut(this,Ct,Rt).call(this)}}])&&it(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Lt(e){var t=ct(this,bt).querySelector("#".concat(e.id,"-error"));e.classList.add(ct(this,yt)),t.textContent=e.validationMessage,t.classList.add(ct(this,wt))}function Mt(e){var t=ct(this,bt).querySelector("#".concat(e.id,"-error"));e.classList.remove(ct(this,yt)),t.classList.remove(ct(this,wt)),t.textContent=""}function Tt(e){e.validity.valid?ut(this,_t,Mt).call(this,e):ut(this,gt,Lt).call(this,e)}function qt(){return ct(this,kt).some((function(e){return!e.validity.valid}))}function It(){ct(this,mt).setAttribute("disabled",!0),ct(this,mt).classList.add(ct(this,vt))}function At(){ct(this,mt).removeAttribute("disabled"),ct(this,mt).classList.remove(ct(this,vt))}function Rt(){ut(this,Et,qt).call(this)?ut(this,Pt,It).call(this):ut(this,Wt,At).call(this)}function Ut(){var e=this;ct(this,kt).forEach((function(t){t.addEventListener("input",(function(){ut(e,St,Tt).call(e,t),ut(e,Ct,Rt).call(e)}))}))}var xt=document.querySelector(".profile__edit-button"),zt=document.querySelector(".profile__add-button"),Dt=document.querySelector(".profile__avatar");function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bt=" ",Vt=" ",Nt=" ",Jt=new nt({url:"https://mesto.nomoreparties.co/v1/cohort-52",headers:{authorization:"e157ce8e-c830-48fc-81a0-0ff04f7cdd6a","Content-Type":"application/json"}}),Ht=new l({renderer:function(e){Ht.addItem(Gt(e))}},".elements__grid"),$t=[Jt.getUserInfo(),Jt.getInitialCards()];function Gt(e){var t=new Fe(e,".element-template",{handleCardClick:function(){Kt.openPopup(e)},handleAddLike:function(){Jt.addLikeCard(e._id).then((function(e){t.setLikeInfo(e.likes)})).catch((function(e){console.log("Ошибка при добавлении Like карточки",e)}))},handleRemoveLike:function(){Jt.removeLikeCard(e._id).then((function(e){t.setLikeInfo(e.likes)})).catch((function(e){console.log("Ошибка при удалении Like карточки",e)}))},handleTrashClick:function(){en.openPopup(e),Vt=e._id,Nt=t}},Bt);return t.createCard()}Promise.all($t).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1];Xt.setUserInfo(i),Xt.setUserId(i),Bt=i._id,console.log("inter",Bt),Ht.renderItems(o)})).catch((function(e){renderError("Ошибка: ".concat(e))}));var Kt=new M(".popup_type_card");Kt.setEventListeners(),zt.addEventListener("click",(function(){Qt.openPopup();var e=Qt.getFormPopup();nn[e.getAttribute("name")].resetValidation()}));var Qt=new Z({popupSelector:".popup_type_add",handleFormSubmit:function(e){Qt.renderLoading(!0),Jt.createCard(e.name,e.link).then((function(e){Ht.addItem(Gt(e)),Qt.closePopup()})).catch((function(e){console.log("Ошибка при добавлении новой карточки",e)})).finally((function(){Qt.renderLoading(!1)}))}});Qt.setEventListeners();var Xt=new se({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"}),Yt=new Z({popupSelector:".popup_type_edit",handleFormSubmit:function(e){Yt.renderLoading(!0),Jt.editUserInfo(e.name,e.about).then((function(e){Xt.setUserInfo(e),Yt.closePopup()})).catch((function(e){console.log("Ошибка при редактировании профиля",e)})).finally((function(){Yt.renderLoading(!1)}))}});Yt.setEventListeners(),xt.addEventListener("click",(function(){Yt.openPopup();var e=Yt.getFormPopup(),t=Xt.getUserInfo();Yt.setInputValues(t),nn[e.getAttribute("name")].resetValidation()})),Dt.addEventListener("click",(function(){Zt.openPopup();var e=Zt.getFormPopup();nn[e.getAttribute("name")].resetValidation()}));var Zt=new Z({popupSelector:".popup_type_avatar",handleFormSubmit:function(e){Zt.renderLoading(!0),Jt.editUserAvatar(e.avatar).then((function(e){Xt.setUserAvatar(e),Zt.closePopup()})).catch((function(e){console.log("Ошибка при редактировании аватара",e)})).finally((function(){Zt.renderLoading(!1)}))}});Zt.setEventListeners();var en=new Z({popupSelector:".popup_type_confirmation",handleFormSubmit:function(){en.renderLoading(!0),Jt.deleteCard(Vt).then((function(){Nt.handleDeleteCard(),en.closePopup()})).catch((function(e){console.log("Ошибка при подтверждении удаления карточки",e)})).finally((function(){en.renderLoading(!1)}))}});en.setEventListeners();var tn,nn={};tn={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",popupErrorSelector:".popup__error",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(tn.formSelector)).forEach((function(e){var t=new jt(tn,e),n=e.getAttribute("name");nn[n]=t,t.enableValidation()}))})();